<!DOCTYPE html>
<!--
Template Name: Metronic - Bootstrap 4 HTML, React, Angular 11 & VueJS Admin Dashboard Theme
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Dribbble: www.dribbble.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: https://1.envato.market/EA4JP
Renew Support: https://1.envato.market/EA4JP
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<html lang="en">
<!--begin::Head-->
<head>
    <base href="">
    <meta charset="utf-8" />
    <title>Sign Up - Natania</title>
    <meta name="description" content="Updates and statistics" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="canonical" href="https://keenthemes.com/metronic" />
    <!--begin::Fonts-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" />
    <!--end::Fonts-->
    <!--begin::Page Vendors Styles(used by this page)-->
    <link href="~/metronic/dist/assets/plugins/custom/fullcalendar/fullcalendar.bundle.css" rel="stylesheet" type="text/css" />
    <!--end::Page Vendors Styles-->
    <!--begin::Global Theme Styles(used by all pages)-->
    <link href="~/metronic/dist/assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
    <link href="~/metronic/dist/assets/plugins/custom/prismjs/prismjs.bundle.css" rel="stylesheet" type="text/css" />
    <link href="~/metronic/dist/assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
    <!--end::Global Theme Styles-->
    <!--begin::Layout Themes(used by all pages)-->
    <!--end::Layout Themes-->

    <script src="~/wwwroot/assets/plugins/jquery/jquery-3.2.1.min.js"></script>
    <script src="~/wwwroot/assets/plugins/jquery-ui/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="~/metronic/dist/assets/plugins/custom/fullcalendar/fullcalendar.bundle.js"></script>
    <link rel="shortcut icon" href="~/metronic/src/media/se.ico" />
</head>

<body id="kt_body" class="quick-panel-right demo-panel-right offcanvas-right header-fixed header-mobile-fixed subheader-enabled aside-enabled aside-static page-loading">
    <!--begin::Main-->
    <div class="d-flex flex-column flex-root">
        <!--begin::Login-->
        <div class="col-12 login login-1 login-signin-on d-flex flex-column flex-lg-row flex-column-fluid bg-white" id="kt_login">
            <!--begin::Aside-->
            <div class="col-5 login-aside d-flex flex-row-auto bgi-size-cover bgi-no-repeat p-10 p-lg-10" style="background-image: url('../../assets/images/natania1.jpg');">
                <!--begin: Aside Container-->
                <div class="d-flex flex-row-fluid flex-column justify-content-between">
                    <!--begin: Aside header-->
                    <a href="#" class="text-center flex-column-auto mt-5 pb-lg-0 pb-10">
                        <img src="../../assets/images/Natania_logo_www_markeot.com 440-3121.png" class="ml-0 max-h-150px" alt="" />
                    </a>
                    <!--end: Aside header-->
                    <!--begin: Aside content-->
                    <div class="flex-column-fluid d-flex flex-column justify-content-center">
                        <h3 class="text-center font-size-h1 mb-5 text-black">Welcome to Natania!</h3>
                        <p class="text-center font-weight-lighter text-black opacity-80">The quality user experience app exclusively for Natania Home Owners</p>
                    </div>
                    <!--end: Aside content-->
                    <!--begin: Aside footer for desktop-->
                    <div class="d-none flex-column-auto d-lg-flex justify-content-between mt-10">
                        <div class="opacity-70 font-weight-bold text-black">© 2021 Metronic</div>
                        <div class="d-flex">
                            <a href="#" class="text-black">Privacy</a>
                            <a href="#" class="text-black ml-10">Legal</a>
                            <a href="#" class="text-black ml-10">Contact</a>
                        </div>
                    </div>
                    <!--end: Aside footer for desktop-->
                </div>
                <!--end: Aside Container-->
            </div>
            <!--begin::Aside-->
            <!--begin::Content-->
            <div class="col-7 d-flex flex-column flex-row-fluid position-relative p-7 overflow-hidden">
                <!--begin::Content header-->
                <div class="position-absolute top-0 right-0 text-right mt-5 mb-15 mb-lg-0 flex-column-auto justify-content-center py-5 px-10">
                    <span class="font-weight-bold text--50">Already have an account?</span>
                    <a href="natania_signin_page" class="font-weight-bold ml-2">Sign In!</a>
                </div>
                <!--end::Content header-->
                <!--begin::Content body-->
                <div class="d-flex flex-column-fluid flex-center mt-30 mt-lg-0">
                    <!--begin::Signup-->
                    <div class="login-form login-signup">
                        <div class="text-center mb-10 mb-lg-20">
                            <h3 class="font-size-h1">Sign Up</h3>
                            <p class="text-muted font-weight-bold">Enter your details to create your account</p>
                        </div>
                        <!--begin::Form-->

                        <div class="form-group">
                            <input class="form-control form-control-solid h-auto py-5 px-6" type="text" placeholder="First Name" id="first_name" autocomplete="off" />
                        </div>
                        <div class="form-group">
                            <input class="form-control form-control-solid h-auto py-5 px-6" type="text" placeholder="Last Name" id="last_name" autocomplete="off" />
                        </div>
                        <div class="form-group">
                            <input class="form-control form-control-solid h-auto py-5 px-6" type="email" placeholder="Email" id="email" autocomplete="off" />
                        </div>
                        <div class="form-group">
                            <input class="form-control form-control-solid h-auto py-5 px-6" type="password" placeholder="Password" id="password" autocomplete="off" onfocus="show_validation()" onblur="hide_validation()" onkeyup="check_password()" />
                        </div>
                        <div class="alert alert-secondary mb-5 p-5 d-none" role="alert" id="validation_list">
                            <p class="font-size-sm font-weight-bold">Password must contain the following:</p>
                            <div class="font-size-xs">
                                <p class="text-primary" id="password_length_validation">8 Characters</p>
                                <p class="text-primary" id="password_uppercase_validation">Uppercase</p>
                                <p class="text-primary" id="password_lowercase_validation">Lowercase</p>
                                <p class="text-primary" id="password_number_validation">Number</p>
                                <p class="text-primary" id="password_specialchar_validation">Special Character (e.g. * or _)</p>
                            </div>


                        </div>
                        <div class="form-group">
                            <label class="checkbox mb-0">
                                <input type="checkbox" id="agree" onclick="i_agree()" />
                                <span></span>I Agree to the 
                                <a href="#"> terms and conditions</a>
                            </label>
                        </div>
                        <div class="form-group d-flex flex-wrap flex-center">
                            <button type="button" class="btn btn-primary font-weight-bold px-9 py-4 my-3 mx-4" id="submit" disabled onclick="verify_inputs()">
                                Submit
                            </button>
                            <button type="button" class="btn btn-light-primary font-weight-bold px-9 py-4 my-3 mx-4" onclick="window.location.href='natania_signin_page'">Cancel</button>
                        </div>
                        <!--end::Form-->
                    </div>
                    <!--end::Signup-->
                </div>
                <!--end::Content body-->
                <!--begin::Content footer for mobile-->
                <div class="d-flex d-lg-none flex-column-auto flex-column flex-sm-row justify-content-between align-items-center mt-5 p-5">
                    <div class="text-dark-50 font-weight-bold order-2 order-sm-1 my-2">© 2021 Metronic</div>
                    <div class="d-flex order-1 order-sm-2 my-2">
                        <a href="#" class="text-dark-75 text-hover-primary">Privacy</a>
                        <a href="#" class="text-dark-75 text-hover-primary ml-4">Legal</a>
                        <a href="#" class="text-dark-75 text-hover-primary ml-4">Contact</a>
                    </div>
                </div>
                <!--end::Content footer for mobile-->
            </div>
            <!--end::Content-->
        </div>
        <!--end::Login-->
    </div>
    <!--end::Main-->
    <script>var HOST_URL = "https://preview.keenthemes.com/metronic/theme/html/tools/preview";</script>
    <!--begin::Global Config(global config for global JS scripts)-->
    <script>var KTAppSettings = { "breakpoints": { "sm": 576, "md": 768, "lg": 992, "xl": 1200, "xxl": 1200 }, "colors": { "theme": { "base": { "white": "#ffffff", "primary": "#6993FF", "secondary": "#E5EAEE", "success": "#1BC5BD", "info": "#8950FC", "warning": "#FFA800", "danger": "#F64E60", "light": "#F3F6F9", "dark": "#212121" }, "light": { "white": "#ffffff", "primary": "#E1E9FF", "secondary": "#ECF0F3", "success": "#C9F7F5", "info": "#EEE5FF", "warning": "#FFF4DE", "danger": "#FFE2E5", "light": "#F3F6F9", "dark": "#D6D6E0" }, "inverse": { "white": "#ffffff", "primary": "#ffffff", "secondary": "#212121", "success": "#ffffff", "info": "#ffffff", "warning": "#ffffff", "danger": "#ffffff", "light": "#464E5F", "dark": "#ffffff" } }, "gray": { "gray-100": "#F3F6F9", "gray-200": "#ECF0F3", "gray-300": "#E5EAEE", "gray-400": "#D6D6E0", "gray-500": "#B5B5C3", "gray-600": "#80808F", "gray-700": "#464E5F", "gray-800": "#1B283F", "gray-900": "#212121" } }, "font-family": "Poppins" };</script>
    <!--end::Global Config-->
    <!--begin::Global Theme Bundle(used by all pages)-->
    <script src="assets/plugins/global/plugins.bundle.js"></script>
    <script src="assets/plugins/custom/prismjs/prismjs.bundle.js"></script>
    <script src="assets/js/scripts.bundle.js"></script>
    <!--end::Global Theme Bundle-->
    <!--begin::Page Scripts(used by this page)-->
    <script src="assets/js/pages/custom/login/login-general.js"></script>
    <!--end::Page Scripts-->
</body>

<!--end::Body-->
</html>

<script>

    function verify_inputs() {
        var errors = [];
        var inputs = ["first_name", "last_name", "email", "password"];
        var returned = "";
        if (check_password() != true) { errors.push("password"); }
        if (check_firstname() != true) { errors.push("first_name"); }
        if (check_lastname() != true) { errors.push("last_name"); }
        if (check_email(returned) != "true") { errors.push("email"); }
        for (let i = 0; i < inputs.length; i++)
            $("#" + inputs[i]).removeClass("border border-primary");

        if (errors.length >= 1) {
            for (let i = 0; i < errors.length; i++)
                $("#" + errors[i]).addClass("border border-primary");
        }
        else {
            add_account();
        }

    }

    function show_validation() {
        $("#validation_list").removeClass("d-none");
    }

    function hide_validation() {
        $("#validation_list").addClass("d-none");
    }

    function check_firstname() {
        var firstname = $("#first_name").val();
        if (firstname.length < 1) { return false; }
        else { return true; }
    }

    function check_lastname() {
        var lastname = $("#last_name").val();
        if (lastname.length < 1) { return false; }
        else { return true; }
    }

    function check_email(returned) {
        var sign = /^(([^<>()[\]\\.,;:\s@@\"]+(\.[^<>()[\]\\.,;:\s@@\"]+)*)|(\".+\"))@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        var email = $('#email').val();
        var returned = "";
        if (email.match(sign)) {
            var data = {
                'email': email
            };
            $.ajax({
                type: 'post',
                url: 'check_email',
                data: data,
                async: false,
                success: function (response) {
                    var result = JSON.parse(response);
                    if (result[0].result == "true") {
                        alert("Email already exists");
                        returned = "false";
                    }
                    else {
                        returned = "true";
                    }
                }
            })

        }

        else {
            returned = "false";
        }

        return returned;


    }

    function check_password() {
        var password = $('#password').val();
        var upper_case_letters = /[A-Z]/g;
        var lower_case_letters = /[a-z]/g;
        var numbers = /[0-9]/g;
        var special_characters = /[!@@#$%^&*]/g;
        var errors = [];
        //Validate Length
        if (password.length >= 8) {
            $("#password_length_validation").removeClass("text-primary");
            $("#password_length_validation").addClass("text-success");
        }
        else {
            $("#password_length_validation").removeClass("text-success");
            $("#password_length_validation").addClass("text-primary");
            errors.push("length");

        }
        //Validate Upper Case
        if (password.match(upper_case_letters)) {
            $("#password_uppercase_validation").removeClass("text-primary");
            $("#password_uppercase_validation").addClass("text-success");
        }
        else {
            $("#password_uppercase_validation").removeClass("text-success");
            $("#password_uppercase_validation").addClass("text-primary");
            errors.push("uppercase");
        }
        //Validate Lower Case
        if (password.match(lower_case_letters)) {
            $("#password_lowercase_validation").removeClass("text-primary");
            $("#password_lowercase_validation").addClass("text-success");
        }
        else {
            $("#password_lowercase_validation").removeClass("text-success");
            $("#password_lowercase_validation").addClass("text-primary");
            errors.push("lowercase");
        }
        //Validate Number
        if (password.match(numbers)) {
            $("#password_number_validation").removeClass("text-primary");
            $("#password_number_validation").addClass("text-success");
        }
        else {
            $("#password_number_validation").removeClass("text-success");
            $("#password_number_validation").addClass("text-primary");
            errors.push("number");
        }
        //Validate Special Character
        if (password.match(special_characters)) {
            $("#password_specialchar_validation").removeClass("text-primary");
            $("#password_specialchar_validation").addClass("text-success");
        }
        else {
            $("#password_specialchar_validation").removeClass("text-success");
            $("#password_specialchar_validation").addClass("text-primary");
            errors.push("specialchar");
        }

        if (errors.length < 1) {
            return true;
        } else { return false; }

    }

    function isCheckboxChecked() {
        var checkbox = document.getElementById("agree"); // Get the checkbox element
        var isChecked = checkbox.checked; // Check if the checkbox is checked
        return isChecked;
    }

    function i_agree() {
        if (isCheckboxChecked()) {
            document.getElementById("submit").removeAttribute('disabled');
        }
        else {
            document.getElementById("submit").setAttribute('disabled', 'disabled');
        }
    }

    function add_account() {
        var rand = function () {
            return Math.random().toString(36).substr(2); // remove `0.`
        };

        var token = function () {
            return rand() + rand(); // to make it longer
        };

        var data = {
            'first_name': $('#first_name').val(),
            'last_name': $('#last_name').val(),
            'email': $('#email').val(),
            'password': $('#password').val(),
            'token': token()
        };
        $.ajax({
            type: 'post',
            url: 'add_account',
            data: data,
            async: true,
            beforeSend: function () {
                document.getElementById("submit").setAttribute('disabled', 'disabled');
                document.getElementById("submit").innerHTML =`<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Submitting...`;
            },
            success: function (response) {
                document.getElementById("submit").removeAttribute('disabled');
                document.getElementById("submit").innerHTML = `Submit`;
                var result = JSON.parse(response);
                if (result[0].result == "success") {
                    alert("Email verification link was sent to your email, check your spam if not seen in the inbox");
                    window.location.href = 'natania_signin_page';
                }
                else {
                    alert("Error");
                }
            }
        });
    }



</script>